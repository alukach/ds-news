{"version":3,"sources":["store/utils.ts","store/auth/auth.actions.ts","store/auth/auth.reducer.tsx","store/query/query.actions.ts","store/query/query.reducer.tsx","store/auth/auth.epics.ts","store/query/query.selectors.ts","store/query/query.epics.ts","store/query/utils.ts","store/root-epic.tsx","services/index.ts","services/Github.ts","config.ts","store/root-reducer.tsx","store/store.tsx","components/Nav.tsx","views/Login.tsx","views/Feed/Issue.tsx","views/Feed/Sidebar.tsx","views/Feed/NavFilter.tsx","views/Feed/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","fetchToken","createAsyncAction","logout","createAction","tokenReducer","createReducer","handleType","getType","request","state","action","status","data","undefined","error","success","payload","failure","combineReducers","token","setQuery","setSearchTerm","setSort","addRepo","rmRepo","executeSearch","startPolling","stopPolling","setPollingTimer","initialState","search","repo","sort","active","count","interval","queryReducer","handleAction","includes","concat","filter","name","resultsReducer","asOf","moment","format","pollingReducer","query","results","polling","epics","action$","state$","ajax","config","pipe","isActionOf","switchMap","post","api","auth","code","Accept","map","response","access_token","catchError","message","of","mapTo","push","basePath","paths","feed","getQueryString","createSelector","Object","entries","value","Array","isArray","length","flatMap","key","v","join","queryChanged","prevState","curState","JSON","stringify","router","location","pathname","pairwise","debounceTime","searchDebounceMs","replace","encodeURIComponent","ofType","REHYDRATE","url","slice","decodeURIComponent","split","reduce","acc","Boolean","merge","github","from","switchMapTo","timer","val","takeWhile","repeat","takeUntil","mergeMapTo","rootEpic","combineEpics","authEpics","queryEpics","services","graphql","searchQuery","headers","authorization","apiBase","process","domain","history","clientId","login","createBrowserHistory","epicMiddleware","createEpicMiddleware","dependencies","middlewares","createRouterMiddleware","enhancer","applyMiddleware","persistConfig","storage","whitelist","persistedReducer","persistReducer","connectRouter","store","createStore","persistor","persistStore","run","connect","isLoggedIn","dispatch","bindActionCreators","dispatchLogout","id","className","src","alt","href","onClick","dispatchfetchToken","qs","parse","authToken","useEffect","emojis","CONFUSED","EYES","HEART","HOORAY","LAUGH","ROCKET","THUMBS_DOWN","THUMBS_UP","title","number","author","createdAt","closedAt","repository","reactions","comments","owner","avatarUrl","style","maxHeight","borderRadius","verticalAlign","fromNow","edges","edge","node","content","r1","reaction","emoji","size","tooltip","totalCount","dispatchAddRepo","dispatchRmRepo","useState","repoName","setRepoName","toLowerCase","i","onSubmit","e","preventDefault","type","placeholder","onChange","currentTarget","searchTerm","sortOptions","created","updated","interactions","flexGrow","UncontrolledDropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","dispatchSetSearchTerm","dispatchSetSort","NavFilter","nodes","Issue","Sidebar","App","loading","basename","path","component","Login","Feed","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.4203d91a.chunk.js","sourcesContent":["import { compose } from \"redux\";\n\nexport const composeEnhancers =\n  (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n","import { createAction, createAsyncAction } from \"typesafe-actions\";\n\nexport const fetchToken = createAsyncAction(\n  \"AUTH/FETCH_TOKEN_REQUEST\",\n  \"AUTH/FETCH_TOKEN_SUCCESS\",\n  \"AUTH/FETCH_TOKEN_FAILURE\"\n)<string, string, string>();\n\nexport const logout = createAction(\"AUTH/LOGOUT\")();\n","import { combineReducers } from \"redux\";\nimport { createReducer, getType } from \"typesafe-actions\";\nimport { fetchToken, logout } from \"./auth.actions\";\nimport { Async } from \"../types\";\n\nexport type AuthState = Readonly<{\n  token: null | Async<string, string>;\n}>;\nconst initialState: AuthState = {\n  token: null\n};\n\nconst tokenReducer = createReducer(initialState.token)\n  .handleType(getType(fetchToken.request), (state, action) => ({\n    status: \"FETCHING\",\n    data: undefined,\n    error: undefined\n  }))\n  .handleType(getType(fetchToken.success), (state, action) => ({\n    status: \"SUCCESS\",\n    data: action.payload,\n    error: undefined\n  }))\n  .handleType(getType(fetchToken.failure), (state, action) => ({\n    status: \"FAILED\",\n    data: undefined,\n    error: action.payload\n  }))\n  .handleType(getType(logout), () => null);\n\n// TODO: Handle fetchToken.failure, fetchToken.start\n\nexport default combineReducers({\n  token: tokenReducer\n});\n","import { createAction, createAsyncAction } from \"typesafe-actions\";\nimport { IssuesSearchResult } from \"../../services/Github\";\nimport { QueryState } from \"./query.reducer\";\n\nexport const setQuery = createAction(\"QUERY/SET\")<QueryState[\"query\"]>();\nexport const setSearchTerm = createAction(\"QUERY/SET_SEARCH_TERM\")<string>();\nexport const setSort = createAction(\"QUERY/SET_SORT\")<string>();\nexport const addRepo = createAction(\"QUERY/REPO_ADD\")<string>();\nexport const rmRepo = createAction(\"QUERY/REPO_RM\")<string>();\n\nexport const executeSearch = createAsyncAction(\n  \"QUERY/SEARCH_REQUEST\",\n  \"QUERY/SEARCH_SUCCESS\",\n  \"QUERY/SEARCH_FAILURE\"\n)<string, IssuesSearchResult, string>();\n\nexport const startPolling = createAction(\"QUERY/START_POLLING\")();\nexport const stopPolling = createAction(\"QUERY/STOP_POLLING\")();\nexport const setPollingTimer = createAction(\"QUERY/SET_POLLING_TIMER\")<\n  number\n>();\n","import { combineReducers } from \"redux\";\nimport { createReducer } from \"typesafe-actions\";\nimport {\n  setSearchTerm,\n  executeSearch,\n  startPolling,\n  stopPolling,\n  setPollingTimer,\n  rmRepo,\n  addRepo,\n  setSort,\n  setQuery\n} from \"./query.actions\";\nimport { Async } from \"../types\";\nimport { IssuesSearchResult } from \"../../services/Github\";\nimport moment from \"moment\";\n\n// TODO: Clear query results on logout\nexport type QueryState = Readonly<{\n  query: {\n    search: string;\n    repo: string[];\n    sort: string;\n  };\n  results: null | (Async<IssuesSearchResult, string> & { asOf: string });\n  polling: {\n    active: boolean;\n    count: null | number;\n    interval: number;\n  };\n}>;\nconst initialState: QueryState = {\n  query: {\n    search: \"\",\n    repo: [],\n    sort: \"created\"\n  },\n  results: null,\n  polling: {\n    active: true,\n    count: null,\n    interval: 5 * 60\n  }\n};\n\nconst queryReducer = createReducer(initialState.query)\n  .handleAction(setSearchTerm, (state, { payload }) => ({\n    ...state,\n    search: payload\n  }))\n  .handleAction(setQuery, (state, { payload }) => ({\n    ...initialState.query,\n    ...payload\n  }))\n  .handleAction(setSort, (state, { payload }) => ({\n    ...state,\n    sort: payload\n  }))\n  .handleAction(addRepo, ({ repo, ...state }, { payload }) => ({\n    ...state,\n    repo: repo.includes(payload) ? repo : repo.concat(payload)\n  }))\n  .handleAction(rmRepo, ({ repo, ...state }, { payload }) => ({\n    ...state,\n    repo: repo.filter(name => name !== payload)\n  }));\n\nconst resultsReducer = createReducer(initialState.results)\n  .handleAction(executeSearch.request, (state, action) => ({\n    status: \"FETCHING\",\n    data: state?.data,\n    error: undefined,\n    asOf: moment().format(\"LLL\")\n  }))\n  .handleAction(executeSearch.success, (state, { payload }) => ({\n    status: \"SUCCESS\",\n    data: payload,\n    error: undefined,\n    asOf: moment().format(\"LLL\")\n  }))\n  .handleAction(executeSearch.failure, (state, { payload }) => ({\n    status: \"FAILED\",\n    data: undefined,\n    error: payload,\n    asOf: moment().format(\"LLL\")\n  }));\n\nconst pollingReducer = createReducer(initialState.polling)\n  .handleAction(startPolling, state => ({\n    ...state,\n    active: true\n  }))\n  .handleAction(stopPolling, state => ({\n    ...state,\n    count: null,\n    active: false\n  }))\n  .handleAction(setPollingTimer, (state, { payload }) => ({\n    ...state,\n    count: payload\n  }));\n\nexport default combineReducers({\n  query: queryReducer,\n  results: resultsReducer,\n  polling: pollingReducer\n});\n","import { push } from \"connected-react-router\";\nimport { of } from \"rxjs\";\nimport { catchError, filter, map, mapTo, switchMap } from \"rxjs/operators\"; // tslint:disable-line\nimport { isActionOf } from \"typesafe-actions\";\nimport { RootEpic } from \"../types\";\nimport { fetchToken } from \"./auth.actions\";\n\nconst fetchGithubToken: RootEpic = (action$, state$, { ajax, config }) =>\n  action$.pipe(\n    filter(isActionOf(fetchToken.request)),\n    switchMap(({ payload }) =>\n      ajax\n        .post(\n          config.api.auth,\n          {\n            code: payload\n          },\n          {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }\n        )\n        .pipe(\n          map(response => response.response),\n          map(({ access_token }: { access_token: string }) => {\n            fetchToken.success(access_token);\n          }),\n          catchError(message => of(fetchToken.failure(message)))\n        )\n    )\n  );\n\nconst redirectHomeAfterLogin: RootEpic = (action$, state$, { config }) =>\n  action$.pipe(\n    filter(isActionOf(fetchToken.success)),\n    mapTo(push(`${config.basePath}${config.paths.feed}`))\n  );\n\nexport const epics = [fetchGithubToken, redirectHomeAfterLogin];\n","import { createSelector } from \"reselect\";\nimport { QueryState } from \"./query.reducer\";\n\nconst getQuery = (query: QueryState[\"query\"]) => query;\n\n/**\n * Convert the query object into a Github compliant query string\n */\nexport const getQueryString = createSelector([getQuery], query =>\n  Object.entries(query)\n    // Ignore empty queries\n    .filter(([_, value]) => (Array.isArray(value) ? value.length : value))\n    // Break array values into array of key + value\n    .flatMap(([key, value]) =>\n      Array.isArray(value)\n        ? (value as Array<number | string>).map(v => [key, v])\n        : [[key, value]]\n    )\n    // Format as key:value\n    .map(([key, value]) => (key === \"search\" ? value : `${key}:${value}`))\n    .join(\" \")\n);\n","import { replace } from \"connected-react-router\";\nimport { ofType } from \"redux-observable\";\nimport { REHYDRATE } from \"redux-persist\";\nimport { concat, from, merge, of, timer } from \"rxjs\";\nimport {\n  catchError,\n  debounceTime,\n  filter,\n  map,\n  mergeMapTo,\n  pairwise,\n  repeat,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  takeWhile\n} from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { fetchToken } from \"../auth/auth.actions\";\nimport { RootEpic, RootState } from \"../types\";\nimport {\n  executeSearch,\n  setPollingTimer,\n  setQuery,\n  startPolling,\n  stopPolling\n} from \"./query.actions\";\nimport { getQueryString } from \"./query.selectors\";\nimport { getQueryFromString } from \"./utils\";\n\nconst queryChanged = ([prevState, curState]: [RootState, RootState]) =>\n  JSON.stringify(prevState.query.query) !==\n  JSON.stringify(curState.query.query);\n\n/**\n * When our search parameters update, update URL\n */\nconst setUrl: RootEpic = (action$, state$, { config }) =>\n  // On query change\n  state$.pipe(\n    filter(\n      () =>\n        state$.value.router.location.pathname ===\n        `${config.basePath}${config.paths.feed}`\n    ),\n    pairwise(),\n    filter(queryChanged),\n    debounceTime(config.searchDebounceMs), // Without debounce, the app can feel sluggish when each keystroke updates the URL\n    map(([_, curState]) => curState.query.query),\n    map(query =>\n      replace({\n        ...state$.value.router.location,\n        search: `q=${encodeURIComponent(getQueryString(query))}`\n      })\n    )\n  );\n\n/**\n * When we load application, rehydrate query from URL\n */\nconst loadFromUrl: RootEpic = (action$, state$, { config }) =>\n  action$.pipe(\n    ofType(REHYDRATE),\n    filter(\n      () =>\n        state$.value.router.location.pathname ===\n        `${config.basePath}${config.paths.feed}`\n    ),\n    map(() =>\n      setQuery(\n        getQueryFromString(state$.value.router.location.search.slice(3)) // Slice to ignore '?q='\n      )\n    )\n  );\n\n/**\n * Trigger a search to Github in response to particular events\n */\nconst triggerSearchEpic: RootEpic = (action$, state$, { config }) =>\n  // Trigger search on...\n  merge(\n    // ... actions where login occurred\n    action$.pipe(filter(isActionOf(fetchToken.success))),\n\n    // ... actions where poll counter hits 0\n    action$.pipe(\n      ofType(setPollingTimer),\n      filter(({ payload }) => payload === 0)\n    ),\n\n    // ... states where compared to last state query has changed\n    state$.pipe(pairwise(), filter(queryChanged))\n  ).pipe(\n    // Only if user has an access token\n    filter(() => !!state$.value.auth.token?.data),\n    // Throttle search executions\n    debounceTime(config.searchDebounceMs),\n    // Execute search with computed query string\n    map(() => executeSearch.request(getQueryString(state$.value.query.query)))\n  );\n\n/**\n * When our app first hydrates on load, take action\n */\nconst rehydrationEpic: RootEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(REHYDRATE),\n    mergeMapTo(\n      concat(\n        // Refresh our query results if we are logged in\n        of(\n          executeSearch.request(getQueryString(state$.value.query.query))\n        ).pipe(filter(() => !!state$.value.auth.token?.data)),\n\n        // Start polling if polling is set to active and we are logged in\n        of(startPolling()).pipe(\n          filter(() => !!state$.value.query.polling.active),\n          filter(() => !!state$.value.auth.token?.data)\n        )\n      )\n    )\n  );\n\nconst pollQuery: RootEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(startPolling),\n    switchMapTo(\n      timer(0, 1000).pipe(\n        // Compute diff between polling time and current counter value\n        map(val => state$.value.query.polling.interval - val),\n        takeWhile(val => val >= 0),\n        map(setPollingTimer),\n        repeat(),\n        takeUntil(action$.pipe(ofType(stopPolling)))\n      )\n    )\n  );\n\n/**\n * Execute search with Github\n */\nconst executeSearchEpic: RootEpic = (action$, state$, { github, ajax }) =>\n  action$.pipe(\n    ofType(executeSearch.request),\n    // switchMap ensures we ignore the results of ongoing search requests\n    switchMap(({ payload }) =>\n      state$.value.auth.token?.data\n        ? // TODO: Consider using the ajax tool to enable cancellation\n          from(\n            github.query({\n              query: payload,\n              token: state$.value.auth.token.data\n            })\n          ).pipe(\n            map(response => executeSearch.success(response)),\n            catchError(message => of(executeSearch.failure(message)))\n          )\n        : of(executeSearch.failure(\"You must be logged in to query Github\"))\n    )\n  );\n\nexport const epics = [\n  setUrl,\n  loadFromUrl,\n  triggerSearchEpic,\n  executeSearchEpic,\n  pollQuery,\n  rehydrationEpic\n];\n","import { QueryState } from \"./query.reducer\";\n\nexport const getQueryFromString = (url: string) =>\n  decodeURIComponent(url)\n    .split(\" \")\n    .map(v => v.split(\":\"))\n    .reduce(\n      (acc, v) => ({\n        ...acc,\n        // Anything aside from 'sort' or 'repo' goes in search\n        ...(v.filter(Boolean).length === 1 || ![\"sort\", \"repo\"].includes(v[0])\n          ? {\n              search: acc.search ? `${acc.search} ${v.join(\":\")}` : v.join(\":\")\n            }\n          : // Put anything with a ':' in store under key\n            {\n              [v[0]]: (acc[v[0] as keyof QueryState[\"query\"]] || []).concat(\n                v.slice(1).join(\":\") // rejoin any colons in value\n              )\n            })\n      }),\n      {} as QueryState[\"query\"]\n    );\n","import { combineEpics } from \"redux-observable\";\nimport { epics as authEpics } from \"./auth/auth.epics\";\nimport { epics as queryEpics } from \"./query/query.epics\";\n\nexport const rootEpic = combineEpics(...authEpics, ...queryEpics);\n","import { ajax } from \"rxjs/ajax\";\nimport { Github } from \"./Github\";\n\nexport const services = {\n  github: new Github(),\n  ajax\n};\n","import { graphql } from \"@octokit/graphql\";\n\nexport class Github {\n  async query({ query, token }: { query: string; token: string }) {\n    return graphql(\n      `\n        query($searchQuery: String!) {\n          search(query: $searchQuery, type: ISSUE, first: 100) {\n            issueCount\n            nodes {\n              ... on Issue {\n                title\n                number\n                repository {\n                  owner {\n                    login\n                  }\n                  name\n                }\n                author {\n                  login\n                  avatarUrl\n                }\n                createdAt\n                closedAt\n                reactions(first: 100) {\n                  edges {\n                    node {\n                      content\n                    }\n                  }\n                }\n                comments {\n                  totalCount\n                }\n              }\n            }\n          }\n        }\n      `,\n      {\n        searchQuery: query,\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }\n    ) as Promise<IssuesSearchResult>;\n  }\n}\n\nexport interface IssuesSearchResult {\n  search: Search;\n}\ninterface Search {\n  issueCount: number;\n  nodes: IssueNode[];\n}\nexport interface IssueNode {\n  title: string;\n  number: number;\n  repository: Repository;\n  author: Author;\n  createdAt: string;\n  closedAt: string;\n  reactions: Reactions;\n  comments: {\n    totalCount: number;\n  };\n}\ninterface Repository {\n  name: string;\n  owner: {\n    login: string;\n  };\n}\ninterface Author {\n  login: string;\n  avatarUrl: string;\n}\ninterface Reactions {\n  edges?: Array<ReactionEdgesEntity | null> | null;\n}\ninterface ReactionEdgesEntity {\n  node: ReactionsNode;\n}\ninterface ReactionsNode {\n  content: string;\n}\n","const apiBase = process.env.REACT_APP_API_URL;\nif (!apiBase) throw new Error('Variable \"REACT_APP_API_URL\" not set');\nconst clientId = process.env.REACT_APP_GH_CLIENT_ID;\nif (!clientId) throw new Error('Variable \"REACT_APP_GH_CLIENT_ID\" not set');\nconst domain = process.env.REACT_APP_DOMAIN;\nif (!domain) throw new Error('Variable \"REACT_APP_DOMAIN\" not set');\n\nexport default {\n  clientId,\n  domain,\n  searchDebounceMs: 300,\n  basePath: process.env.PUBLIC_URL,\n  api: {\n    auth: `${apiBase}/auth`\n  },\n  paths: {\n    feed: \"/\",\n    login: \"/login\"\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\nimport { History } from \"history\";\nimport auth from \"./auth/auth.reducer\";\nimport query from \"./query/query.reducer\";\n\nexport const rootReducer = (history: History) =>\n  combineReducers({\n    router: connectRouter(history),\n    auth,\n    query\n  });\n","import { createStore, applyMiddleware } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { persistStore, persistReducer, PersistConfig } from \"redux-persist\";\nimport { createBrowserHistory } from \"history\";\nimport storage from \"redux-persist/lib/storage\";\n\nimport { routerMiddleware as createRouterMiddleware } from \"connected-react-router\";\n\nimport { composeEnhancers } from \"./utils\";\nimport { rootReducer } from \"./root-reducer\";\nimport { rootEpic } from \"./root-epic\";\nimport { services } from \"../services\";\nimport { RootAction, RootState, EpicDependencies } from \"./types\";\nimport config from \"../config\";\n\n// browser history\nexport const history = createBrowserHistory();\n\nexport const epicMiddleware = createEpicMiddleware<\n  RootAction,\n  RootAction,\n  RootState,\n  EpicDependencies\n>({ dependencies: { ...services, config } });\n\nconst routerMiddleware = createRouterMiddleware(history);\n\n// configure middlewares\nconst middlewares = [epicMiddleware, routerMiddleware];\n\n// compose enhancers\nconst enhancer = composeEnhancers(applyMiddleware(...middlewares));\n\n// rehydrate state on app start\nconst initialState = {};\n\n// Set persistance\nconst persistConfig: PersistConfig<any> = {\n  key: \"root\",\n  storage,\n  whitelist: [\"auth\", \"query\"]\n};\nconst persistedReducer = persistReducer(persistConfig, rootReducer(history));\n\n// create store\nexport const store = createStore(persistedReducer, initialState, enhancer);\nexport const persistor = persistStore(store);\n\n// connect redux-observables\nepicMiddleware.run(rootEpic);\n","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { RootState } from \"../store/types\";\nimport { logout } from \"../store/auth/auth.actions\";\nimport config from \"../config\";\n\nexport const Nav: React.SFC<Props> = ({ isLoggedIn, dispatchLogout }) => (\n  <nav id=\"header\" className=\"navbar\">\n    <ul>\n      <li>\n        <img\n          className=\"logo\"\n          src={`${process.env.PUBLIC_URL}/favicon.png`}\n          alt=\"ds news logo\"\n        />\n        <h1>ds news</h1>\n      </li>\n      <li>\n        <a\n          className=\"selected\"\n          href={`${process.env.PUBLIC_URL}${config.paths.feed}`}\n        >\n          feed\n        </a>\n      </li>\n    </ul>\n    <ul>\n      <li>\n        {isLoggedIn ? (\n          <button onClick={dispatchLogout} className=\"link-button\">\n            logout\n          </button>\n        ) : (\n          <a\n            href={`https://github.com/login/oauth/authorize?client_id=${config.clientId}&redirect_uri=${config.domain}${config.basePath}${config.paths.login}&scope=repo`}\n          >\n            Login with Github\n          </a>\n        )}\n      </li>\n    </ul>\n  </nav>\n);\n\ninterface StateProps {\n  isLoggedIn: boolean;\n}\ninterface DispatchProps {\n  dispatchLogout: typeof logout;\n}\ninterface OwnProps {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ auth }) => ({ isLoggedIn: !!auth.token?.data }),\n  dispatch => bindActionCreators({ dispatchLogout: logout }, dispatch)\n)(Nav);\n","import React, { useEffect } from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport qs from \"query-string\";\nimport { fetchToken } from \"../store/auth/auth.actions\";\nimport { connect } from \"react-redux\";\nimport { RootState } from \"../store/types\";\nimport { bindActionCreators } from \"redux\";\nimport { AuthState } from \"../store/auth/auth.reducer\";\n\nconst Login: React.SFC<Props> = ({ location, dispatchfetchToken, token }) => {\n  // Get code from QueryString\n  // TODO: Stop using 'query-string', instead get query from router.location.query in redux\n  const { code } = qs.parse(location.search);\n  const authToken = Array.isArray(code) ? code[0] : code;\n\n  // TODO: Mv this logic to Redux Observables\n  useEffect(() => {\n    if (!authToken) return;\n    dispatchfetchToken(authToken);\n  }, [authToken, dispatchfetchToken]);\n\n  if (!code) {\n    return <p className=\"error\">No code provided. Please login.</p>;\n  }\n  return token?.status === \"FETCHING\" ? (\n    <p>Fetching auth token...</p>\n  ) : token?.status === \"FAILED\" ? (\n    <p className=\"error\">{token.error}</p>\n  ) : (\n    <p>Successfully retrieved token</p>\n  );\n};\n\ninterface StateProps {\n  token: AuthState[\"token\"];\n}\ninterface DispatchProps {\n  dispatchfetchToken: typeof fetchToken.request;\n}\ninterface OwnProps extends RouteComponentProps<{ code: string }> {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ auth }) => ({ token: auth.token }),\n  dispatch =>\n    bindActionCreators({ dispatchfetchToken: fetchToken.request }, dispatch)\n)(Login);\n","import React from \"react\";\nimport { Emoji } from \"emoji-mart\";\nimport moment from \"moment\";\nimport { IssueNode } from \"../../services/Github\";\n\nconst emojis = {\n  CONFUSED: \":confused:\",\n  EYES: \":eyes:\",\n  HEART: \":heart:\",\n  HOORAY: \":tada:\",\n  LAUGH: \":smile:\",\n  ROCKET: \":rocket:\",\n  THUMBS_DOWN: \":-1:\",\n  THUMBS_UP: \":+1:\"\n};\n\nexport default ({\n  title,\n  number,\n  author,\n  createdAt,\n  closedAt,\n  repository,\n  reactions,\n  comments\n}: Props) => (\n  <li className={closedAt ? \"closed\" : \"\"}>\n    <h6 className=\"mb-0\">\n      <a\n        href={`https://github.com/${repository?.owner.login}/${repository?.name}/issues/${number}`}\n      >\n        {title}\n      </a>\n    </h6>\n\n    <p>\n      <a\n        href={`https://github.com/${repository?.owner.login}/${repository?.name}/issues/${number}`}\n      >\n        <strong>{repository?.name}</strong>#{number}\n      </a>\n      {\" by \"}\n      {/* Author */}\n      <a href={`https://github.com/${author?.login}`}>\n        <img\n          src={author?.avatarUrl}\n          alt={`${author?.login} profile pic`}\n          className=\"mr-1\"\n          style={{\n            maxHeight: \"1rem\",\n            borderRadius: 2,\n            verticalAlign: \"text-top\"\n          }}\n        />\n        {author?.login}\n      </a>{\" \"}\n      {/* Created */}\n      <span title={createdAt!}>{moment(createdAt!).fromNow()}</span>\n      {/* Closed */}\n      {closedAt && (\n        <em className=\"small\" title={closedAt!}>\n          {\" \"}\n          (closed {moment(closedAt).fromNow()})\n        </em>\n      )}\n      {\" | \"}\n      {/* Reactions */}\n      {reactions.edges?.length ? (\n        Object.entries(\n          reactions?.edges?.reduce(\n            (acc, edge) => ({\n              ...acc,\n              [edge?.node.content || \"\"]:\n                (acc[edge?.node.content || \"\"] || 0) + 1\n            }),\n            {} as Record<string, number>\n          ) || {}\n        )\n          .slice()\n          .sort(([r1], [r2]) => (r2 > r1 ? -1 : 1))\n          .map(([reaction, count]) => (\n            <span key={reaction}>\n              <Emoji\n                emoji={emojis[reaction as keyof typeof emojis]}\n                size={16}\n                tooltip\n              />\n              {count > 1 && <sup>{count}</sup>}\n            </span>\n          ))\n      ) : (\n        <em className=\"small\">no reactions</em>\n      )}\n      {\" | \"}\n      <span>\n        {comments.totalCount ? (\n          <>\n            <Emoji emoji={\"speech_balloon\"} size={16} tooltip />\n            {comments.totalCount > 1 && (\n              <sup>\n                {comments.totalCount === 100 ? \"100+\" : comments.totalCount}\n              </sup>\n            )}\n          </>\n        ) : (\n          <em className=\"small\">no comments</em>\n        )}\n      </span>\n    </p>\n  </li>\n);\n\ninterface Props extends IssueNode {}\n","import React, { useState } from \"react\";\nimport { RootState } from \"../../store/types\";\nimport { rmRepo, addRepo } from \"../../store/query/query.actions\";\n\nexport default ({\n  query: { repo },\n  results,\n  dispatchAddRepo,\n  dispatchRmRepo\n}: Props) => {\n  const [repoName, setRepoName] = useState(\"\");\n  return (\n    <ul className=\"col-sm-3 list-unstyled sidebar\">\n      <li className=\"mt-2 \">\n        <h4>last updated</h4>\n        <span className=\"text-monospace small\">\n          {results &&\n            (results.status === \"FETCHING\"\n              ? \"loading...\"\n              : `${results.asOf.toLowerCase()}`)}\n        </span>\n      </li>\n\n      <li>\n        <h4>Repos</h4>\n        <ul className=\"list-unstyled\">\n          {repo\n            .slice()\n            .sort()\n            .map((repo, i) => (\n              <li key={i} className=\"overflow-auto text-nowrap\">\n                <span\n                  className=\"ml-1 close-link\"\n                  title=\"remove repo\"\n                  onClick={() => dispatchRmRepo(repo)}\n                />\n                <pre className=\"ml-1 d-inline\">{repo}</pre>\n              </li>\n            ))}\n        </ul>\n        <form\n          onSubmit={e => {\n            e.preventDefault();\n            dispatchAddRepo(repoName);\n            setRepoName(\"\");\n          }}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"owner/repo\"\n            className=\"small text-monospace w-100 pl-1 mt-2\"\n            value={repoName}\n            onChange={e => setRepoName(e.currentTarget.value)}\n          />\n        </form>\n      </li>\n    </ul>\n  );\n};\n\ninterface Props {\n  query: RootState[\"query\"][\"query\"];\n  results: RootState[\"query\"][\"results\"];\n  dispatchAddRepo: typeof addRepo;\n  dispatchRmRepo: typeof rmRepo;\n}\n","import React from \"react\";\nimport {\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from \"reactstrap\";\nimport { QueryState } from \"../../store/query/query.reducer\";\n\nexport default ({ sort, setSort, searchTerm, setSearchTerm }: Props) => {\n  const sortOptions = {\n    created: \"recently created\",\n    updated: \"recently updated\",\n    interactions: \"interactions\",\n    \"reactions-heart\": \"loved\",\n    \"reactions-tada\": \"celebrated\",\n    reactions: \"reactions\",\n    \"reactions-+1\": \"liked\",\n    \"reactions--1\": \"disliked\"\n  };\n  return (\n    <nav className=\"navbar px-1\">\n      <ul className=\"d-flex\" style={{ flexGrow: 1 }}>\n        <li className=\"w-100\">\n          <input\n            placeholder=\"Search\"\n            value={searchTerm}\n            className=\"text-monospace w-100\"\n            onChange={(e: React.FormEvent<HTMLInputElement>) =>\n              setSearchTerm(e.currentTarget.value)\n            }\n          />\n        </li>\n      </ul>\n      <ul className=\"ml-auto\">\n        <li className=\"ml-2\">\n          <UncontrolledDropdown className=\"d-inline\">\n            <DropdownToggle tag=\"a\" className=\"link-button d-inline-block\">\n              most {sortOptions[sort as keyof typeof sortOptions]} ▼\n            </DropdownToggle>{\" \"}\n            <DropdownMenu>\n              {Object.entries(sortOptions).map(([key, value]) => (\n                <DropdownItem key={key} onClick={() => setSort(key)}>\n                  {value}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\ninterface Props {\n  sort: QueryState[\"query\"][\"sort\"];\n  setSort: (sort: string) => void;\n  searchTerm: QueryState[\"query\"][\"search\"];\n  setSearchTerm: (term: string) => void;\n}\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport {\n  setSearchTerm,\n  setSort,\n  addRepo,\n  rmRepo\n} from \"../../store/query/query.actions\";\nimport { RootState } from \"../../store/types\";\nimport Issue from \"./Issue\";\nimport Sidebar from \"./Sidebar\";\nimport NavFilter from \"./NavFilter\";\nimport { getQueryString } from \"../../store/query/query.selectors\";\n\nexport const Feed: React.SFC<Props> = ({\n  results,\n  query,\n  dispatchSetSort,\n  dispatchSetSearchTerm,\n  dispatchAddRepo,\n  dispatchRmRepo\n}) => (\n  <div className=\"row no-gutters\">\n    <div className=\"col-sm pr-1\">\n      <NavFilter\n        sort={query.sort}\n        setSort={dispatchSetSort}\n        searchTerm={query.search}\n        setSearchTerm={dispatchSetSearchTerm}\n      />\n      {results?.status === \"FAILED\" ? (\n        <pre>{results.error}</pre>\n      ) : (\n        results?.data && (\n          <ol className=\"issues\">\n            {results.data.search.nodes\n              ?.filter(node => Object.entries(node).length !== 0)\n              .map((node, i) => (\n                <Issue key={i} {...node} />\n              ))}\n          </ol>\n        )\n      )}\n      <code>{getQueryString(query)}</code>\n    </div>\n    <Sidebar\n      query={query}\n      results={results}\n      dispatchAddRepo={dispatchAddRepo}\n      dispatchRmRepo={dispatchRmRepo}\n    />\n  </div>\n);\ninterface StateProps {\n  query: RootState[\"query\"][\"query\"];\n  results: RootState[\"query\"][\"results\"];\n  polling: RootState[\"query\"][\"polling\"];\n}\ninterface DispatchProps {\n  dispatchSetSearchTerm: typeof setSearchTerm;\n  dispatchSetSort: typeof setSort;\n  dispatchAddRepo: typeof addRepo;\n  dispatchRmRepo: typeof rmRepo;\n}\ninterface OwnProps extends RouteComponentProps {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ query: { query, results, polling } }) => ({\n    query,\n    results,\n    polling\n  }),\n  dispatch =>\n    bindActionCreators(\n      {\n        dispatchSetSearchTerm: setSearchTerm,\n        dispatchSetSort: setSort,\n        dispatchAddRepo: addRepo,\n        dispatchRmRepo: rmRepo\n      },\n      dispatch\n    )\n)(Feed);\n\n// interface StateProps {\n//   query: RootState[\"query\"][\"query\"];\n//   polling: RootState[\"query\"][\"polling\"];\n//   results: RootState[\"query\"][\"results\"];\n// }\n// interface DispatchProps {\n//   dispatchSetSearchTerm: typeof setSearchTerm;\n// }\n// interface OwnProps {}\n// type Props = StateProps & DispatchProps & OwnProps;\n\n// export default connect<StateProps, DispatchProps, OwnProps, RootState>(\n//   ({ query }) => ({\n//     query: query.query,\n//     polling: query.polling,\n//     results: query.results\n//   }),\n//   dispatch =>\n//     bindActionCreators(\n//       {\n//         dispatchSetSearchTerm: setSearchTerm,\n//         dispatchAddRepo: addRepo,\n//         dispatchRmRepo: rmRepo\n//       },\n//       dispatch\n//     )\n// )(Sidebar);\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { store, history } from \"./store/store\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport Nav from \"./components/Nav\";\nimport Login from \"./views/Login\";\nimport Feed from \"./views/Feed\";\nimport { persistor } from \"./store/store\";\nimport config from \"./config\";\n\nconst App: React.FC = () => {\n  return (\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <PersistGate persistor={persistor} loading={<p>Loading...</p>}>\n          <Router basename={config.basePath}>\n            <Nav />\n            <div className=\"container-fluid\">\n              <Switch>\n                <Route path={config.paths.login} component={Login} />\n                <Route path={config.paths.feed} component={Feed} />\n              </Switch>\n            </div>\n          </Router>\n        </PersistGate>\n      </ConnectedRouter>\n    </Provider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/style.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}