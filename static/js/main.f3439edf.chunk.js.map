{"version":3,"sources":["store/utils.ts","store/auth/auth.actions.ts","store/auth/auth.reducer.tsx","store/query/query.actions.ts","store/query/query.reducer.tsx","store/auth/auth.epics.ts","store/query/query.selectors.ts","store/query/query.epics.ts","store/query/utils.ts","store/root-epic.tsx","services/index.ts","services/Github.ts","config.ts","store/root-reducer.tsx","store/store.tsx","components/Nav.tsx","views/Login.tsx","views/Feed/Issue.tsx","views/Feed/Sidebar.tsx","views/Feed/NavFilter.tsx","views/Feed/index.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","fetchToken","createAsyncAction","logout","createAction","tokenReducer","createReducer","handleType","getType","success","state","action","payload","combineReducers","token","setQuery","setSearchTerm","setSort","addRepo","rmRepo","executeSearch","startPolling","stopPolling","setPollingTimer","initialState","search","repo","sort","active","count","interval","queryReducer","handleAction","includes","concat","filter","name","resultsReducer","request","status","data","error","undefined","asOf","moment","format","failure","pollingReducer","query","results","polling","epics","action$","state$","ajax","config","pipe","isActionOf","mergeMap","post","api","auth","code","Accept","map","response","access_token","catchError","message","of","mapTo","push","basePath","paths","feed","getQueryString","createSelector","Object","entries","value","Array","isArray","length","flatMap","key","v","join","queryChanged","prevState","curState","JSON","stringify","pairwise","debounceTime","searchDebounceMs","replace","router","location","encodeURIComponent","merge","ofType","LOCATION_CHANGE","pathname","isFirstRendering","REHYDRATE","url","slice","decodeURIComponent","split","reduce","acc","Boolean","some","check","github","switchMap","from","switchMapTo","timer","val","takeWhile","repeat","takeUntil","mergeMapTo","rootEpic","combineEpics","authEpics","queryEpics","services","graphql","searchQuery","headers","authorization","apiBase","process","domain","history","clientId","login","createBrowserHistory","epicMiddleware","createEpicMiddleware","dependencies","middlewares","createRouterMiddleware","enhancer","applyMiddleware","persistConfig","storage","whitelist","persistedReducer","persistReducer","connectRouter","store","createStore","persistor","persistStore","run","connect","isLoggedIn","dispatch","bindActionCreators","dispatchLogout","id","className","src","alt","href","onClick","dispatchfetchToken","qs","parse","authToken","useEffect","to","emojis","CONFUSED","EYES","HEART","HOORAY","LAUGH","ROCKET","THUMBS_DOWN","THUMBS_UP","title","number","author","createdAt","closedAt","repository","reactions","comments","owner","avatarUrl","style","maxHeight","borderRadius","verticalAlign","fromNow","edges","edge","node","content","r1","reaction","emoji","size","tooltip","totalCount","dispatchAddRepo","dispatchRmRepo","useState","repoName","setRepoName","toLowerCase","i","onSubmit","e","preventDefault","type","placeholder","onChange","currentTarget","searchTerm","sortOptions","created","updated","interactions","flexGrow","UncontrolledDropdown","DropdownToggle","tag","DropdownMenu","DropdownItem","dispatchSetSearchTerm","dispatchSetSort","NavFilter","nodes","Issue","Sidebar","App","loading","basename","path","component","Login","Feed","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.f3439edf.chunk.js","sourcesContent":["import { compose } from \"redux\";\n\nexport const composeEnhancers =\n  (window as any).__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n","import { createAction, createAsyncAction } from \"typesafe-actions\";\n\nexport const fetchToken = createAsyncAction(\n  \"AUTH/FETCH_TOKEN_REQUEST\",\n  \"AUTH/FETCH_TOKEN_SUCCESS\",\n  \"AUTH/FETCH_TOKEN_FAILURE\"\n)<string, string, string>();\n\nexport const logout = createAction(\"AUTH/LOGOUT\")();\n","import { combineReducers } from \"redux\";\nimport { createReducer, getType } from \"typesafe-actions\";\nimport { fetchToken, logout } from \"./auth.actions\";\n\nexport type AuthState = Readonly<{\n  token: string;\n}>;\nconst initialState: AuthState = {\n  token: \"\"\n};\n\nconst tokenReducer = createReducer(initialState.token)\n  .handleType(getType(fetchToken.success), (state, action) => action.payload)\n  .handleType(getType(logout), state => \"\");\n\n// TODO: Handle fetchToken.failure, fetchToken.start\n\nexport default combineReducers({\n  token: tokenReducer\n});\n","import { createAction, createAsyncAction } from \"typesafe-actions\";\nimport { IssuesSearchResult } from \"../../services/Github\";\nimport { QueryState } from \"./query.reducer\";\n\nexport const setQuery = createAction(\"QUERY/SET\")<QueryState[\"query\"]>();\nexport const setSearchTerm = createAction(\"QUERY/SET_SEARCH_TERM\")<string>();\nexport const setSort = createAction(\"QUERY/SET_SORT\")<string>();\nexport const addRepo = createAction(\"QUERY/REPO_ADD\")<string>();\nexport const rmRepo = createAction(\"QUERY/REPO_RM\")<string>();\n\nexport const executeSearch = createAsyncAction(\n  \"QUERY/SEARCH_REQUEST\",\n  \"QUERY/SEARCH_SUCCESS\",\n  \"QUERY/SEARCH_FAILURE\"\n)<string, IssuesSearchResult, string>();\n\nexport const startPolling = createAction(\"QUERY/START_POLLING\")();\nexport const stopPolling = createAction(\"QUERY/STOP_POLLING\")();\nexport const setPollingTimer = createAction(\"QUERY/SET_POLLING_TIMER\")<\n  number\n>();\n","import { combineReducers } from \"redux\";\nimport { createReducer } from \"typesafe-actions\";\nimport {\n  setSearchTerm,\n  executeSearch,\n  startPolling,\n  stopPolling,\n  setPollingTimer,\n  rmRepo,\n  addRepo,\n  setSort,\n  setQuery\n} from \"./query.actions\";\nimport { Async } from \"../types\";\nimport { IssuesSearchResult } from \"../../services/Github\";\nimport moment from \"moment\";\n\n// TODO: Clear query results on logout\nexport type QueryState = Readonly<{\n  query: {\n    search: string;\n    repo: string[];\n    sort: string;\n  };\n  results: null | (Async<IssuesSearchResult, string> & { asOf: string });\n  polling: {\n    active: boolean;\n    count: null | number;\n    interval: number;\n  };\n}>;\nconst initialState: QueryState = {\n  query: {\n    search: \"\",\n    repo: [],\n    sort: \"created\"\n  },\n  results: null,\n  polling: {\n    active: true,\n    count: null,\n    interval: 5 * 60\n  }\n};\n\nconst queryReducer = createReducer(initialState.query)\n  .handleAction(setSearchTerm, (state, { payload }) => ({\n    ...state,\n    search: payload\n  }))\n  .handleAction(setQuery, (state, { payload }) => ({\n    ...initialState.query,\n    ...payload\n  }))\n  .handleAction(setSort, (state, { payload }) => ({\n    ...state,\n    sort: payload\n  }))\n  .handleAction(addRepo, ({ repo, ...state }, { payload }) => ({\n    ...state,\n    repo: repo.includes(payload) ? repo : repo.concat(payload)\n  }))\n  .handleAction(rmRepo, ({ repo, ...state }, { payload }) => ({\n    ...state,\n    repo: repo.filter(name => name !== payload)\n  }));\n\nconst resultsReducer = createReducer(initialState.results)\n  .handleAction(executeSearch.request, (state, action) => ({\n    status: \"FETCHING\",\n    data: state?.data,\n    error: undefined,\n    asOf: moment().format(\"LLL\")\n  }))\n  .handleAction(executeSearch.success, (state, { payload }) => ({\n    status: \"SUCCESS\",\n    data: payload,\n    error: undefined,\n    asOf: moment().format(\"LLL\")\n  }))\n  .handleAction(executeSearch.failure, (state, { payload }) => ({\n    status: \"FAILED\",\n    data: undefined,\n    error: payload,\n    asOf: moment().format(\"LLL\")\n  }));\n\nconst pollingReducer = createReducer(initialState.polling)\n  .handleAction(startPolling, state => ({\n    ...state,\n    active: true\n  }))\n  .handleAction(stopPolling, state => ({\n    ...state,\n    count: null,\n    active: false\n  }))\n  .handleAction(setPollingTimer, (state, { payload }) => ({\n    ...state,\n    count: payload\n  }));\n\nexport default combineReducers({\n  query: queryReducer,\n  results: resultsReducer,\n  polling: pollingReducer\n});\n","import { push } from \"connected-react-router\";\nimport { of } from \"rxjs\";\nimport { catchError, filter, map, mapTo, mergeMap } from \"rxjs/operators\"; // tslint:disable-line\nimport { isActionOf } from \"typesafe-actions\";\nimport { RootEpic } from \"../types\";\nimport { fetchToken } from \"./auth.actions\";\n\nconst fetchGithubToken: RootEpic = (action$, state$, { ajax, config }) =>\n  action$.pipe(\n    filter(isActionOf(fetchToken.request)),\n    mergeMap(({ payload }) =>\n      ajax\n        .post(\n          config.api.auth,\n          {\n            code: payload\n          },\n          {\n            \"Content-Type\": \"application/json\",\n            Accept: \"application/json\"\n          }\n        )\n        .pipe(\n          map(response => response.response),\n          map(({ access_token }: { access_token: string }) =>\n            fetchToken.success(access_token)\n          ),\n          catchError(message => of(fetchToken.failure(message)))\n        )\n    )\n  );\n\nconst redirectHomeAfterLogin: RootEpic = (action$, state$, { config }) =>\n  action$.pipe(\n    filter(isActionOf(fetchToken.success)),\n    mapTo(push(`${config.basePath}${config.paths.feed}`))\n  );\n\nexport const epics = [fetchGithubToken, redirectHomeAfterLogin];\n","import { createSelector } from \"reselect\";\nimport { QueryState } from \"./query.reducer\";\n\nconst getQuery = (query: QueryState[\"query\"]) => query;\n\n/**\n * Convert the query object into a Github compliant query string\n */\nexport const getQueryString = createSelector([getQuery], query =>\n  Object.entries(query)\n    // Ignore empty queries\n    .filter(([_, value]) => (Array.isArray(value) ? value.length : value))\n    // Break array values into array of key + value\n    .flatMap(([key, value]) =>\n      Array.isArray(value)\n        ? (value as Array<number | string>).map(v => [key, v])\n        : [[key, value]]\n    )\n    // Format as key:value\n    .map(([key, value]) => (key === \"search\" ? value : `${key}:${value}`))\n    .join(\" \")\n);\n","import { LOCATION_CHANGE, replace } from \"connected-react-router\";\nimport { ofType } from \"redux-observable\";\nimport { REHYDRATE } from \"redux-persist\";\nimport { concat, from, merge, of, timer } from \"rxjs\";\nimport {\n  catchError,\n  debounceTime,\n  filter,\n  map,\n  mergeMapTo,\n  pairwise,\n  repeat,\n  switchMap,\n  switchMapTo,\n  takeUntil,\n  takeWhile\n} from \"rxjs/operators\";\nimport { isActionOf } from \"typesafe-actions\";\nimport { fetchToken } from \"../auth/auth.actions\";\nimport { RootAction, RootEpic, RootState } from \"../types\";\nimport {\n  executeSearch,\n  setPollingTimer,\n  setQuery,\n  startPolling,\n  stopPolling\n} from \"./query.actions\";\nimport { getQueryString } from \"./query.selectors\";\nimport { getQueryFromString } from \"./utils\";\n\nconst queryChanged = ([prevState, curState]: [RootState, RootState]) =>\n  JSON.stringify(prevState.query.query) !==\n  JSON.stringify(curState.query.query);\n\n/**\n * When our search parameters update, update URL\n */\nconst setUrl: RootEpic = (action$, state$, { config }) =>\n  // On query change\n  state$.pipe(\n    pairwise(),\n    filter(queryChanged),\n    debounceTime(config.searchDebounceMs), // Without debounce, the app can feel sluggish when each keystroke updates the URL\n    map(([_, curState]) => curState.query.query),\n    map(query =>\n      replace({\n        ...state$.value.router.location,\n        search: `q=${encodeURIComponent(getQueryString(query))}`\n      })\n    )\n  );\n\n/**\n * When we load application, rehydrate query from URL\n */\nconst loadFromUrl: RootEpic = (action$, state$, { config }) =>\n  merge(\n    action$.pipe(\n      ofType(LOCATION_CHANGE),\n      filter(\n        ({ payload }) =>\n          payload.location.pathname === `${config.basePath}${config.paths.feed}`\n      ),\n      filter(({ payload }) => payload.isFirstRendering)\n    ),\n    // Ensure that URL takes precident over hydrated state\n    action$.pipe(ofType(REHYDRATE))\n  ).pipe(\n    map(() =>\n      setQuery(\n        getQueryFromString(state$.value.router.location.search.slice(3)) // Slice to ignore '?q='\n      )\n    )\n  );\n\n/**\n * Trigger a search to Github in response to particular events\n */\nconst triggerSearchEpic: RootEpic = (action$, state$, { config }) =>\n  // Trigger search on...\n  merge(\n    // ... actions where ...\n    action$.pipe(\n      filter((action: RootAction) =>\n        [\n          // ... login occurred\n          isActionOf(fetchToken.success),\n          // ... poll counter hits 0\n          (action: RootAction) =>\n            isActionOf(setPollingTimer)(action) && action.payload === 0\n        ].some(check => check(action))\n      )\n    ),\n\n    // ... states where ....\n    state$.pipe(\n      // ...compared to last state ...\n      pairwise(),\n      // ... query has changed\n      filter(queryChanged)\n    )\n  ).pipe(\n    // Throttle search executions\n    debounceTime(config.searchDebounceMs),\n    // Only if user has an access token\n    filter(() => !!state$.value.auth.token),\n    // Execute search with computed query string\n    map(() => executeSearch.request(getQueryString(state$.value.query.query)))\n  );\n\n/**\n * When our app first hydrates on load, take action\n */\nconst rehydrationEpic: RootEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(REHYDRATE),\n    mergeMapTo(\n      concat(\n        // Refresh our query results if we are logged in\n        of(\n          executeSearch.request(getQueryString(state$.value.query.query))\n        ).pipe(filter(() => !!state$.value.auth.token)),\n\n        // Start polling if polling is set to active and we are logged in\n        of(startPolling()).pipe(\n          filter(() => !!state$.value.query.polling.active),\n          filter(() => !!state$.value.auth.token)\n        )\n      )\n    )\n  );\n\nconst pollQuery: RootEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(startPolling),\n    switchMapTo(\n      timer(0, 1000).pipe(\n        // Compute diff between polling time and current counter value\n        map(val => state$.value.query.polling.interval - val),\n        takeWhile(val => val >= 0),\n        map(setPollingTimer),\n        repeat(),\n        takeUntil(action$.pipe(ofType(stopPolling)))\n      )\n    )\n  );\n\n/**\n * Execute search with Github\n */\nconst executeSearchEpic: RootEpic = (action$, state$, { github, ajax }) =>\n  action$.pipe(\n    filter(isActionOf(executeSearch.request)),\n    // switchMap ensures we ignore the results of ongoing search requests\n    switchMap(({ payload }) =>\n      from(\n        // TODO: Consider using the ajax tool to enable cancellation\n        github.query({ query: payload, token: state$.value.auth.token })\n      ).pipe(\n        map(response => executeSearch.success(response)),\n        catchError(message => of(executeSearch.failure(message)))\n      )\n    )\n  );\n\nexport const epics = [\n  setUrl,\n  loadFromUrl,\n  triggerSearchEpic,\n  executeSearchEpic,\n  pollQuery,\n  rehydrationEpic\n];\n","import { QueryState } from \"./query.reducer\";\n\nexport const getQueryFromString = (url: string) =>\n  decodeURIComponent(url)\n    .split(\" \")\n    .map(v => v.split(\":\"))\n    .reduce(\n      (acc, v) => ({\n        ...acc,\n        // Anything aside from 'sort' or 'repo' goes in search\n        ...(v.filter(Boolean).length === 1 || ![\"sort\", \"repo\"].includes(v[0])\n          ? {\n              search: acc.search ? `${acc.search} ${v.join(\":\")}` : v.join(\":\")\n            }\n          : // Put anything with a ':' in store under key\n            {\n              [v[0]]: (acc[v[0] as keyof QueryState[\"query\"]] || []).concat(\n                v.slice(1).join(\":\") // rejoin any colons in value\n              )\n            })\n      }),\n      {} as QueryState[\"query\"]\n    );\n","import { combineEpics } from \"redux-observable\";\nimport { epics as authEpics } from \"./auth/auth.epics\";\nimport { epics as queryEpics } from \"./query/query.epics\";\n\nexport const rootEpic = combineEpics(...authEpics, ...queryEpics);\n","import { ajax } from \"rxjs/ajax\";\nimport { Github } from \"./Github\";\n\nexport const services = {\n  github: new Github(),\n  ajax\n};\n","import { graphql } from \"@octokit/graphql\";\n\nexport class Github {\n  async query({ query, token }: { query: string; token: string }) {\n    return graphql(\n      `\n        query($searchQuery: String!) {\n          search(query: $searchQuery, type: ISSUE, first: 100) {\n            issueCount\n            nodes {\n              ... on Issue {\n                title\n                number\n                repository {\n                  owner {\n                    login\n                  }\n                  name\n                }\n                author {\n                  login\n                  avatarUrl\n                }\n                createdAt\n                closedAt\n                reactions(first: 100) {\n                  edges {\n                    node {\n                      content\n                    }\n                  }\n                }\n                comments {\n                  totalCount\n                }\n              }\n            }\n          }\n        }\n      `,\n      {\n        searchQuery: query,\n        headers: {\n          authorization: `Bearer ${token}`\n        }\n      }\n    ) as Promise<IssuesSearchResult>;\n  }\n}\n\nexport interface IssuesSearchResult {\n  search: Search;\n}\ninterface Search {\n  issueCount: number;\n  nodes: IssueNode[];\n}\nexport interface IssueNode {\n  title: string;\n  number: number;\n  repository: Repository;\n  author: Author;\n  createdAt: string;\n  closedAt: string;\n  reactions: Reactions;\n  comments: {\n    totalCount: number;\n  };\n}\ninterface Repository {\n  name: string;\n  owner: {\n    login: string;\n  };\n}\ninterface Author {\n  login: string;\n  avatarUrl: string;\n}\ninterface Reactions {\n  edges?: Array<ReactionEdgesEntity | null> | null;\n}\ninterface ReactionEdgesEntity {\n  node: ReactionsNode;\n}\ninterface ReactionsNode {\n  content: string;\n}\n","const apiBase = process.env.REACT_APP_API_URL;\nif (!apiBase) throw new Error('Variable \"REACT_APP_API_URL\" not set');\nconst clientId = process.env.REACT_APP_GH_CLIENT_ID;\nif (!clientId) throw new Error('Variable \"REACT_APP_GH_CLIENT_ID\" not set');\nconst domain = process.env.REACT_APP_DOMAIN;\nif (!domain) throw new Error('Variable \"REACT_APP_DOMAIN\" not set');\n\nexport default {\n  clientId,\n  domain,\n  searchDebounceMs: 300,\n  basePath: process.env.PUBLIC_URL,\n  api: {\n    auth: `${apiBase}/auth`\n  },\n  paths: {\n    feed: \"/\",\n    login: \"/login\"\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\nimport { History } from \"history\";\nimport auth from \"./auth/auth.reducer\";\nimport query from \"./query/query.reducer\";\n\nexport const rootReducer = (history: History) =>\n  combineReducers({\n    router: connectRouter(history),\n    auth,\n    query\n  });\n","import { createStore, applyMiddleware } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { persistStore, persistReducer, PersistConfig } from \"redux-persist\";\nimport { createBrowserHistory } from \"history\";\nimport storage from \"redux-persist/lib/storage\";\n\nimport { routerMiddleware as createRouterMiddleware } from \"connected-react-router\";\n\nimport { composeEnhancers } from \"./utils\";\nimport { rootReducer } from \"./root-reducer\";\nimport { rootEpic } from \"./root-epic\";\nimport { services } from \"../services\";\nimport { RootAction, RootState, EpicDependencies } from \"./types\";\nimport config from \"../config\";\n\n// browser history\nexport const history = createBrowserHistory();\n\nexport const epicMiddleware = createEpicMiddleware<\n  RootAction,\n  RootAction,\n  RootState,\n  EpicDependencies\n>({ dependencies: { ...services, config } });\n\nconst routerMiddleware = createRouterMiddleware(history);\n\n// configure middlewares\nconst middlewares = [epicMiddleware, routerMiddleware];\n\n// compose enhancers\nconst enhancer = composeEnhancers(applyMiddleware(...middlewares));\n\n// rehydrate state on app start\nconst initialState = {};\n\n// Set persistance\nconst persistConfig: PersistConfig<any> = {\n  key: \"root\",\n  storage,\n  whitelist: [\"auth\", \"query\"]\n};\nconst persistedReducer = persistReducer(persistConfig, rootReducer(history));\n\n// create store\nexport const store = createStore(persistedReducer, initialState, enhancer);\nexport const persistor = persistStore(store);\n\n// connect redux-observables\nepicMiddleware.run(rootEpic);\n","import React from \"react\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { RootState } from \"../store/types\";\nimport { logout } from \"../store/auth/auth.actions\";\nimport config from \"../config\";\n\nexport const Nav: React.SFC<Props> = ({ isLoggedIn, dispatchLogout }) => (\n  <nav id=\"header\" className=\"navbar\">\n    <ul>\n      <li>\n        <img\n          className=\"logo\"\n          src={`${process.env.PUBLIC_URL}/favicon.png`}\n          alt=\"ds news logo\"\n        />\n        <h1>ds news</h1>\n      </li>\n      <li>\n        <a\n          className=\"selected\"\n          href={`${process.env.PUBLIC_URL}${config.paths.feed}`}\n        >\n          feed\n        </a>\n      </li>\n    </ul>\n    <ul>\n      <li>\n        {isLoggedIn ? (\n          <button onClick={dispatchLogout} className=\"link-button\">\n            logout\n          </button>\n        ) : (\n          <a\n            href={`https://github.com/login/oauth/authorize?client_id=${config.clientId}&redirect_uri=${config.domain}${config.basePath}${config.paths.login}&scope=repo`}\n          >\n            Login with Github\n          </a>\n        )}\n      </li>\n    </ul>\n  </nav>\n);\n\ninterface StateProps {\n  isLoggedIn: boolean;\n}\ninterface DispatchProps {\n  dispatchLogout: typeof logout;\n}\ninterface OwnProps {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ auth }) => ({ isLoggedIn: !!auth.token }),\n  dispatch => bindActionCreators({ dispatchLogout: logout }, dispatch)\n)(Nav);\n","import React, { useEffect } from \"react\";\nimport { RouteComponentProps, Redirect } from \"react-router\";\nimport qs from \"query-string\";\nimport { fetchToken } from \"../store/auth/auth.actions\";\nimport { connect } from \"react-redux\";\nimport { RootState } from \"../store/types\";\nimport { bindActionCreators } from \"redux\";\n\nconst Login: React.SFC<Props> = ({ location, dispatchfetchToken, token }) => {\n  // Get code from QueryString\n  // TODO: Stop using 'query-string', instead get query from router.location.query in redux\n  const { code } = qs.parse(location.search);\n  const authToken = Array.isArray(code) ? code[0] : code;\n\n  useEffect(() => {\n    if (!authToken) return;\n    dispatchfetchToken(authToken);\n  }, [authToken, dispatchfetchToken]);\n\n  if (!code) {\n    return <p className=\"error\">No code provided. Please login.</p>;\n  }\n  if (token) {\n    return <Redirect to=\"/\" />;\n  }\n  return <p>Fetching auth token... {token}</p>;\n};\n\ninterface StateProps {\n  token: string;\n}\ninterface DispatchProps {\n  dispatchfetchToken: typeof fetchToken.request;\n}\ninterface OwnProps extends RouteComponentProps<{ code: string }> {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ auth }) => ({ token: auth.token }),\n  dispatch =>\n    bindActionCreators({ dispatchfetchToken: fetchToken.request }, dispatch)\n)(Login);\n","import React from \"react\";\nimport { Emoji } from \"emoji-mart\";\nimport moment from \"moment\";\nimport { IssueNode } from \"../../services/Github\";\n\nconst emojis = {\n  CONFUSED: \":confused:\",\n  EYES: \":eyes:\",\n  HEART: \":heart:\",\n  HOORAY: \":tada:\",\n  LAUGH: \":smile:\",\n  ROCKET: \":rocket:\",\n  THUMBS_DOWN: \":-1:\",\n  THUMBS_UP: \":+1:\"\n};\n\nexport default ({\n  title,\n  number,\n  author,\n  createdAt,\n  closedAt,\n  repository,\n  reactions,\n  comments\n}: Props) => (\n  <li className={closedAt ? \"closed\" : \"\"}>\n    <h6 className=\"mb-0\">\n      <a\n        href={`https://github.com/${repository?.owner.login}/${repository?.name}/issues/${number}`}\n      >\n        {title}\n      </a>\n    </h6>\n\n    <p>\n      <a\n        href={`https://github.com/${repository?.owner.login}/${repository?.name}/issues/${number}`}\n      >\n        <strong>{repository?.name}</strong>#{number}\n      </a>\n      {\" by \"}\n      {/* Author */}\n      <a href={`https://github.com/${author?.login}`}>\n        <img\n          src={author?.avatarUrl}\n          alt={`${author?.login} profile pic`}\n          className=\"mr-1\"\n          style={{\n            maxHeight: \"1rem\",\n            borderRadius: 2,\n            verticalAlign: \"text-top\"\n          }}\n        />\n        {author?.login}\n      </a>{\" \"}\n      {/* Created */}\n      <span title={createdAt!}>{moment(createdAt!).fromNow()}</span>\n      {/* Closed */}\n      {closedAt && (\n        <em className=\"small\" title={closedAt!}>\n          {\" \"}\n          (closed {moment(closedAt).fromNow()})\n        </em>\n      )}\n      {\" | \"}\n      {/* Reactions */}\n      {reactions.edges?.length ? (\n        Object.entries(\n          reactions?.edges?.reduce(\n            (acc, edge) => ({\n              ...acc,\n              [edge?.node.content || \"\"]:\n                (acc[edge?.node.content || \"\"] || 0) + 1\n            }),\n            {} as Record<string, number>\n          ) || {}\n        )\n          .slice()\n          .sort(([r1], [r2]) => (r2 > r1 ? -1 : 1))\n          .map(([reaction, count]) => (\n            <span key={reaction}>\n              <Emoji\n                emoji={emojis[reaction as keyof typeof emojis]}\n                size={16}\n                tooltip\n              />\n              {count > 1 && <sup>{count}</sup>}\n            </span>\n          ))\n      ) : (\n        <em className=\"small\">no reactions</em>\n      )}\n      {\" | \"}\n      <span>\n        {comments.totalCount ? (\n          <>\n            <Emoji emoji={\"speech_balloon\"} size={16} tooltip />\n            {comments.totalCount > 1 && (\n              <sup>\n                {comments.totalCount === 100 ? \"100+\" : comments.totalCount}\n              </sup>\n            )}\n          </>\n        ) : (\n          <em className=\"small\">no comments</em>\n        )}\n      </span>\n    </p>\n  </li>\n);\n\ninterface Props extends IssueNode {}\n","import React, { useState } from \"react\";\nimport { RootState } from \"../../store/types\";\nimport { rmRepo, addRepo } from \"../../store/query/query.actions\";\n\nexport default ({\n  query: { repo },\n  results,\n  dispatchAddRepo,\n  dispatchRmRepo\n}: Props) => {\n  const [repoName, setRepoName] = useState(\"\");\n  return (\n    <ul className=\"col-sm-3 list-unstyled sidebar\">\n      <li className=\"mt-2 \">\n        <h4>last updated</h4>\n        <span className=\"text-monospace small\">\n          {results &&\n            (results.status === \"FETCHING\"\n              ? \"loading...\"\n              : `${results.asOf.toLowerCase()}`)}\n        </span>\n      </li>\n\n      <li>\n        <h4>Repos</h4>\n        <ul className=\"list-unstyled\">\n          {repo\n            .slice()\n            .sort()\n            .map((repo, i) => (\n              <li key={i} className=\"overflow-auto text-nowrap\">\n                <span\n                  className=\"ml-1 close-link\"\n                  title=\"remove repo\"\n                  onClick={() => dispatchRmRepo(repo)}\n                />\n                <pre className=\"ml-1 d-inline\">{repo}</pre>\n              </li>\n            ))}\n        </ul>\n        <form\n          onSubmit={e => {\n            e.preventDefault();\n            dispatchAddRepo(repoName);\n            setRepoName(\"\");\n          }}\n        >\n          <input\n            type=\"text\"\n            placeholder=\"owner/repo\"\n            className=\"small text-monospace w-100 pl-1 mt-2\"\n            value={repoName}\n            onChange={e => setRepoName(e.currentTarget.value)}\n          />\n        </form>\n      </li>\n    </ul>\n  );\n};\n\ninterface Props {\n  query: RootState[\"query\"][\"query\"];\n  results: RootState[\"query\"][\"results\"];\n  dispatchAddRepo: typeof addRepo;\n  dispatchRmRepo: typeof rmRepo;\n}\n","import React from \"react\";\nimport {\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem\n} from \"reactstrap\";\nimport { QueryState } from \"../../store/query/query.reducer\";\n\nexport default ({ sort, setSort, searchTerm, setSearchTerm }: Props) => {\n  const sortOptions = {\n    created: \"recently created\",\n    updated: \"recently updated\",\n    interactions: \"interactions\",\n    \"reactions-heart\": \"loved\",\n    \"reactions-tada\": \"celebrated\",\n    reactions: \"reactions\",\n    \"reactions-+1\": \"liked\",\n    \"reactions--1\": \"disliked\"\n  };\n  return (\n    <nav className=\"navbar px-1\">\n      <ul className=\"d-flex\" style={{ flexGrow: 1 }}>\n        <li className=\"w-100\">\n          <input\n            placeholder=\"Search\"\n            value={searchTerm}\n            className=\"text-monospace w-100\"\n            onChange={(e: React.FormEvent<HTMLInputElement>) =>\n              setSearchTerm(e.currentTarget.value)\n            }\n          />\n        </li>\n      </ul>\n      <ul className=\"ml-auto\">\n        <li className=\"ml-2\">\n          <UncontrolledDropdown className=\"d-inline\">\n            <DropdownToggle tag=\"a\" className=\"link-button d-inline-block\">\n              most {sortOptions[sort as keyof typeof sortOptions]} ▼\n            </DropdownToggle>{\" \"}\n            <DropdownMenu>\n              {Object.entries(sortOptions).map(([key, value]) => (\n                <DropdownItem key={key} onClick={() => setSort(key)}>\n                  {value}\n                </DropdownItem>\n              ))}\n            </DropdownMenu>\n          </UncontrolledDropdown>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\ninterface Props {\n  sort: QueryState[\"query\"][\"sort\"];\n  setSort: (sort: string) => void;\n  searchTerm: QueryState[\"query\"][\"search\"];\n  setSearchTerm: (term: string) => void;\n}\n","import React from \"react\";\nimport { RouteComponentProps } from \"react-router\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport {\n  setSearchTerm,\n  setSort,\n  addRepo,\n  rmRepo\n} from \"../../store/query/query.actions\";\nimport { RootState } from \"../../store/types\";\nimport Issue from \"./Issue\";\nimport Sidebar from \"./Sidebar\";\nimport NavFilter from \"./NavFilter\";\nimport { getQueryString } from \"../../store/query/query.selectors\";\n\nexport const Feed: React.SFC<Props> = ({\n  results,\n  query,\n  dispatchSetSort,\n  dispatchSetSearchTerm,\n  dispatchAddRepo,\n  dispatchRmRepo\n}) => (\n  <div className=\"row no-gutters\">\n    <div className=\"col-sm pr-1\">\n      <NavFilter\n        sort={query.sort}\n        setSort={dispatchSetSort}\n        searchTerm={query.search}\n        setSearchTerm={dispatchSetSearchTerm}\n      />\n      {results?.status === \"FAILED\" ? (\n        <pre>{results.error}</pre>\n      ) : (\n        results?.data && (\n          <ol className=\"issues\">\n            {results.data.search.nodes\n              ?.filter(node => Object.entries(node).length !== 0)\n              .map((node, i) => (\n                <Issue key={i} {...node} />\n              ))}\n          </ol>\n        )\n      )}\n      <code>{getQueryString(query)}</code>\n    </div>\n    <Sidebar\n      query={query}\n      results={results}\n      dispatchAddRepo={dispatchAddRepo}\n      dispatchRmRepo={dispatchRmRepo}\n    />\n  </div>\n);\ninterface StateProps {\n  query: RootState[\"query\"][\"query\"];\n  results: RootState[\"query\"][\"results\"];\n  polling: RootState[\"query\"][\"polling\"];\n}\ninterface DispatchProps {\n  dispatchSetSearchTerm: typeof setSearchTerm;\n  dispatchSetSort: typeof setSort;\n  dispatchAddRepo: typeof addRepo;\n  dispatchRmRepo: typeof rmRepo;\n}\ninterface OwnProps extends RouteComponentProps {}\ntype Props = StateProps & DispatchProps & OwnProps;\n\nexport default connect<StateProps, DispatchProps, OwnProps, RootState>(\n  ({ query: { query, results, polling } }) => ({\n    query,\n    results,\n    polling\n  }),\n  dispatch =>\n    bindActionCreators(\n      {\n        dispatchSetSearchTerm: setSearchTerm,\n        dispatchSetSort: setSort,\n        dispatchAddRepo: addRepo,\n        dispatchRmRepo: rmRepo\n      },\n      dispatch\n    )\n)(Feed);\n\n// interface StateProps {\n//   query: RootState[\"query\"][\"query\"];\n//   polling: RootState[\"query\"][\"polling\"];\n//   results: RootState[\"query\"][\"results\"];\n// }\n// interface DispatchProps {\n//   dispatchSetSearchTerm: typeof setSearchTerm;\n// }\n// interface OwnProps {}\n// type Props = StateProps & DispatchProps & OwnProps;\n\n// export default connect<StateProps, DispatchProps, OwnProps, RootState>(\n//   ({ query }) => ({\n//     query: query.query,\n//     polling: query.polling,\n//     results: query.results\n//   }),\n//   dispatch =>\n//     bindActionCreators(\n//       {\n//         dispatchSetSearchTerm: setSearchTerm,\n//         dispatchAddRepo: addRepo,\n//         dispatchRmRepo: rmRepo\n//       },\n//       dispatch\n//     )\n// )(Sidebar);\n","import React from \"react\";\nimport { Provider } from \"react-redux\";\nimport { store, history } from \"./store/store\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { PersistGate } from \"redux-persist/integration/react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\n\nimport Nav from \"./components/Nav\";\nimport Login from \"./views/Login\";\nimport Feed from \"./views/Feed\";\nimport { persistor } from \"./store/store\";\nimport config from \"./config\";\n\nconst App: React.FC = () => {\n  return (\n    <Provider store={store}>\n      <ConnectedRouter history={history}>\n        <PersistGate persistor={persistor} loading={<p>Loading...</p>}>\n          <Router basename={config.basePath}>\n            <Nav />\n            <div className=\"container-fluid\">\n              <Switch>\n                <Route path={config.paths.login} component={Login} />\n                <Route path={config.paths.feed} component={Feed} />\n              </Switch>\n            </div>\n          </Router>\n        </PersistGate>\n      </ConnectedRouter>\n    </Provider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./styles/style.scss\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}